<div class="flex flex-col gap-3">
  <div class="flex flex-wrap items-center justify-between gap-6">
    <div>
      <h1>Assessments</h1>
    </div>
    <%= link_to "New assessment", new_assessment_path, class: "inline-flex items-center justify-center gap-2 rounded-full bg-[var(--primary)] px-5 py-2.5 font-semibold text-[var(--primary-foreground)] shadow-[0_12px_24px_rgba(31,111,91,0.18)]" %>
  </div>

  <div class="grid gap-5">
    <div class="inline-flex gap-2 rounded-full bg-[#efe6d8] px-1.5 py-1.5">
      <%= link_to "Active", dashboard_path(status: "active"), class: "rounded-full bg-transparent px-4 py-2 font-semibold text-[#6b7280] #{'shadow-md text-[var(--primary)] bg-[#fffaf3]' if @status == 'active'}" %>
      <%= link_to "Completed", dashboard_path(status: "completed"), class: "rounded-full bg-transparent px-4 py-2 font-semibold text-[#6b7280] #{'shadow-md text-[var(--primary)] bg-[#fffaf3]' if @status == 'completed'}" %>
      <%= link_to "Cancelled", dashboard_path(status: "cancelled"), class: "rounded-full bg-transparent px-4 py-2 font-semibold text-[#6b7280] #{'shadow-md text-[var(--primary)] bg-[#fffaf3]' if @status == 'cancelled'}" %>
    </div>

    <% if @assessments.empty? %>
      <p class="text-[13px] text-[var(--muted-foreground)]">No <%= @status %> assessments yet.</p>
    <% else %>
      <div class="grid grid-cols-2 gap-8 max-[1024px]:grid-cols-1">
        <% @assessments.each do |assessment| %>
          <div class="rounded-[18px] border border-[var(--border)] bg-[#fffaf3] p-[30px] shadow-[0_18px_40px_rgba(31,41,51,0.08)]">
            <div class="mb-2">
              <% if @status == "cancelled" %>
                <span class="text-[16px] text-[#1f2933]"><%= assessment.company_name %></span>
              <% else %>
                <%= link_to assessment.company_name, invite_path(assessment.invite_token), class: "text-[16px] text-[#1f2933]" %>
              <% end %>
            </div>

            <div class="grid gap-1.5 text-[13px] text-[var(--muted-foreground)]">
              <span>Created <%= assessment.created_at.to_date.strftime("%b %d, %Y") %></span>
              <% if @status == "completed" %>
                <span>Completed <%= assessment.updated_at.to_date.strftime("%b %d, %Y") %></span>
                <span><%= assessment_score_label(assessment) %></span>
              <% elsif @status == "active" %>
                <span>Expires <%= assessment.invite_expires_at.to_date.strftime("%b %d, %Y") %></span>
                <span><%= assessment_progress_label(assessment) %></span>
              <% else %>
                <span>Cancelled <%= (assessment.cancelled_at || assessment.updated_at).to_date.strftime("%b %d, %Y") %></span>
                <span><%= assessment_progress_label(assessment) %></span>
              <% end %>
            </div>
            <% if @status == "completed" %>
              <div class="mt-6 flex flex-wrap gap-3">
                <%= link_to "View Results", results_path(assessment.invite_token), class: "inline-flex items-center justify-center gap-2 rounded-full border border-[var(--border)] bg-transparent px-3 py-1.5 text-[13px] font-semibold text-[var(--primary)]" %>
              </div>
            <% elsif @status == "active" %>
              <div class="mt-6 flex flex-wrap gap-3">
                <%= link_to "Resume", invite_path(assessment.invite_token), class: "inline-flex items-center justify-center gap-2 rounded-full border border-[var(--border)] bg-transparent px-3 py-1.5 text-[13px] font-semibold text-[var(--primary)]" %>
                <button class="inline-flex items-center justify-center gap-2 rounded-full bg-transparent px-3 py-1.5 text-[13px] font-semibold text-[var(--primary)]" type="button" data-copy-link="<%= invite_link(assessment) %>">Copy link</button>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
